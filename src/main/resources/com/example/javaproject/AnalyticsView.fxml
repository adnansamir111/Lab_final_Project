<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane prefHeight="600" prefWidth="900" stylesheets="@tasks.css" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.javaproject.CONTROLLER.AnalyticsController">

    <!-- Top Section with Filters -->
    <top>
        <!-- Top container holds three rows: title/back, week filter and course selector -->
        <VBox spacing="12" style="-fx-padding: 16; -fx-background-color: #f4f4f4;">
            <!-- Title row with a back button aligned to the right -->
            <HBox alignment="CENTER_LEFT" prefHeight="34.0" prefWidth="868.0" spacing="10" style="-fx-background-color: #2F4F4F; -fx-background-radius: 5;">
                <Label style="-fx-font-size: 20; -fx-font-weight: bold; -fx-text-fill: white;" text=" Study Analytics" />
                <Region HBox.hgrow="ALWAYS" />
            </HBox>
            <!-- Week filter row -->
            <HBox alignment="CENTER_LEFT" prefHeight="29.0" prefWidth="901.0" spacing="10" style="-fx-background-color: white;">
                <Label alignment="CENTER" contentDisplay="CENTER" prefHeight="29.0" prefWidth="104.0" style="-fx-text-fill: white; -fx-font-weight: bold; -fx-background-color: #2F4F4F; -fx-background-radius: 5;" text="Week starting:">
               <font>
                  <Font size="14.0" />
               </font></Label>
                <DatePicker fx:id="weekStartPicker" style="-fx-font-size: 14px;" />
                <Button onAction="#handleThisWeek" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: white; -fx-background-color: #2F4F4F;" text="This Week">
               <font>
                  <Font name="System Bold" size="12.0" />
               </font></Button>
                <Button onAction="#handleLastWeek" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: white; -fx-background-color: #2F4F4F;" text="Last Week" />
                <Region HBox.hgrow="ALWAYS" />
            </HBox>
            <!-- Course selection row -->
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label prefHeight="20.0" prefWidth="101.0" style="-fx-font-weight: bold; -fx-background-radius: 5; -fx-font-size: 14;" text="Select Course:" />
                <ComboBox fx:id="courseComboBox" prefWidth="200.0" />
            </HBox>
        </VBox>
    </top>

    <!-- Main BarChart Section -->
    <center>
        <BarChart fx:id="studyBarChart" animated="false" legendVisible="false" style="-fx-padding: 10;" title="Weekly Study Time (minutes)">
            <xAxis>
                <CategoryAxis label="Course" />
            </xAxis>
            <yAxis>
                <NumberAxis label="Minutes" />
            </yAxis>
        </BarChart>
    </center>
   <bottom>
      <HBox prefHeight="14.0" prefWidth="900.0" style="-fx-background-color: #2F4F4F;" BorderPane.alignment="CENTER">
         <children>
                <Button onAction="#handleBack" prefHeight="30.0" prefWidth="81.0" style="-fx-text-fill: white; -fx-padding: 5 12; -fx-font-weight: bold;" styleClass="greenButton" text="Back" />
         </children>
      </HBox>
   </bottom>
</BorderPane>
