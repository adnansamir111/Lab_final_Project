<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<BorderPane prefHeight="600" prefWidth="900" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.javaproject.AnalyticsController">

    <!-- Top Section with Filters -->
    <top>
        <!-- Top container holds three rows: title/back, week filter and course selector -->
        <VBox spacing="12" style="-fx-padding: 16; -fx-background-color: #f4f4f4;">
            <!-- Title row with a back button aligned to the right -->
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label style="-fx-font-size: 20; -fx-font-weight: bold;" text="Study Analytics" />
                <Region HBox.hgrow="ALWAYS" />
                <Button onAction="#handleBack" style="-fx-background-color: #2F4F4F; -fx-text-fill: white; -fx-padding: 5 12; -fx-font-weight: bold;" text="Back" />
            </HBox>
            <!-- Week filter row -->
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label text="Week starting:" />
                <DatePicker fx:id="weekStartPicker" style="-fx-font-size: 14px;" />
                <Button onAction="#handleThisWeek" style="-fx-font-size: 14px;" text="This Week" />
                <Button onAction="#handleLastWeek" style="-fx-font-size: 14px;" text="Last Week" />
                <Region HBox.hgrow="ALWAYS" />
            </HBox>
            <!-- Course selection row -->
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label text="Select Course:" />
                <ComboBox fx:id="courseComboBox" prefWidth="200.0" />
            </HBox>
        </VBox>
    </top>

    <!-- Main BarChart Section -->
    <center>
        <BarChart fx:id="studyBarChart" animated="false" legendVisible="false" style="-fx-padding: 10;" title="Weekly Study Time (minutes)">
            <xAxis>
                <CategoryAxis label="Course" />
            </xAxis>
            <yAxis>
                <NumberAxis label="Minutes" />
            </yAxis>
        </BarChart>
    </center>
</BorderPane>
