<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.ToolBar?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane prefHeight="600.0" prefWidth="700.0" stylesheets="@tasks.css" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.javaproject.CONTROLLER.CourseDetailController">

    <!-- Top Bar -->
    <top>
        <ToolBar prefHeight="40.0" prefWidth="700.0" style="-fx-background-color: #2F4F4F;">
            <Label fx:id="lblCourseTitle" style="-fx-font-size:18; -fx-font-weight:bold; -fx-text-fill: white; -fx-padding: 0 10 0 10;" />
        </ToolBar>
    </top>

    <!-- Main Content -->
    <center>
        <TabPane style="-fx-tab-min-width: 120px; -fx-tab-max-width: 150px; -fx-background-color: #F1F1F1;" tabMinWidth="120.0">

            <!-- Overview Tab -->
            <Tab closable="false" style="-fx-background-color: #F1F1F1;" text="Overview">
                <VBox spacing="20" style="-fx-padding:20; -fx-background-color: #FFFFFF;">
                    <Label fx:id="lblInstructor" style="-fx-font-size: 16px; -fx-text-fill: #333;" />
                    <Label fx:id="lblCredits" style="-fx-font-size: 16px; -fx-text-fill: #333;" />

                    <Button onAction="#onDelete" styleClass="redButton" text="❌ Delete Course" />
                </VBox>
            </Tab>

            <!-- Tasks Tab -->
            <Tab closable="false" text="Tasks">
                <VBox style="-fx-padding: 20px;">
                    <TableView fx:id="taskTable" prefHeight="370.0" prefWidth="700.0" style="-fx-background-color: white;" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colTitle" prefWidth="200" text="Title" />
                            <TableColumn fx:id="colDue" prefWidth="120" text="Deadline" />
                            <TableColumn fx:id="colStatus" prefWidth="100" text="Status" />
                            <TableColumn fx:id="colNotes" prefWidth="200" text="Notes" />
                        </columns>
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                        </columnResizePolicy>
                    </TableView>
                    <HBox spacing="15" style="-fx-padding:15 0;">
                        <Button onAction="#onAddTask" styleClass="greenButton" text="➕ Add Task" />
                        <Button onAction="#onEditTask" styleClass="yellowButton" text="✏ Edit Task" />
                        <Button onAction="#onDeleteTask" styleClass="redButton" text="❌ Delete Task" />
                    </HBox>
                </VBox>
            </Tab>

            <!-- Study Sessions Tab -->
            <Tab closable="false" text="Study Sessions">
                <VBox spacing="20" style="-fx-padding:20; -fx-background-color: #FFFFFF;">
                    <!-- Stopwatch Label -->
                    <Label fx:id="lblStopwatch" prefHeight="35.0" prefWidth="135.0" style="-fx-font-size:25; -fx-font-weight:bold; -fx-text-fill: #333;" text="00:00:00 ">
                        <font>
                            <Font size="60.0" />
                        </font>
                    </Label>

                    <!-- Table of sessions -->
                    <TableView fx:id="sessionTable" style="-fx-background-color: white;">
                        <columns>
                            <TableColumn fx:id="colStart" prefWidth="150" text="Start Time" />
                            <TableColumn fx:id="colEnd" prefWidth="150" text="End Time" />
                            <TableColumn fx:id="colDuration" prefWidth="120" text="Duration (min)" />
                            <TableColumn fx:id="colSessionNotes" prefWidth="200" text="Notes" />
                        </columns>
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                        </columnResizePolicy>
                    </TableView>

                    <!-- Buttons -->
                    <HBox spacing="15">
                        <Button onAction="#onStartSession" styleClass="blueButton" text="▶ Start" />
                        <Button onAction="#onPauseSession" styleClass="yellowButton" text="⏸ Pause" />
                        <Button onAction="#onFinishSession" styleClass="greenButton" text="✅ Finish" />
                        <Button mnemonicParsing="false" onAction="#onDeleteSession" styleClass="redButton" text="❌ Delete" />
                        <Button onAction="#onAddManualRecord" styleClass="greenButton" text="➕ Add Manual Record" />
                    </HBox>
                </VBox>
            </Tab>

            <!-- Resources Tab -->
            <Tab closable="false" text="Resources">
                <VBox style="-fx-padding: 20px;">
                    <!-- Table for Resources -->
                    <TableView fx:id="resourceTable" prefHeight="300.0" prefWidth="700.0" style="-fx-background-color: white;">
                        <columns>
                            <TableColumn fx:id="colTopic" prefWidth="200" text="Topic" />
                            <TableColumn fx:id="colVideoLink" prefWidth="400" text="Video Link" />
                        </columns>
                  <columnResizePolicy>
                     <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                  </columnResizePolicy>
                    </TableView>

                    <!-- Button to add resources -->
                    <HBox spacing="15" style="-fx-padding:15 0;">
                        <Button onAction="#onAddResource" styleClass="greenButton" text="➕ Add Resource" />
                    </HBox>
                </VBox>
            </Tab>

        </TabPane>
    </center>
   <bottom>
      <HBox prefHeight="36.0" prefWidth="700.0" style="-fx-background-color: #2F4F4F;" BorderPane.alignment="CENTER">
         <children>
               <Button onAction="#onBack" prefHeight="40.0" prefWidth="94.0" style="-fx-font-weight: bold;" styleClass="greenButton" text="⬅ Back" />
         </children>
      </HBox>
   </bottom>
</BorderPane>
